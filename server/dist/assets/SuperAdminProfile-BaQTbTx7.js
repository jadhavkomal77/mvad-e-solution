import{aE as S,aH as A,D as o,j as e,L as u,x as d,m as h,S as f,aI as U,Y as b,l as y,P as j,aJ as L,X as $,G as z,y as N}from"./index-D6ItWktg.js";const M=()=>{const{data:i,isLoading:v,isError:w,refetch:p}=S(),[P,{isLoading:m}]=A(),[C,l]=o.useState(!1),[s,c]=o.useState({}),[r,g]=o.useState({name:"",email:"",phone:""});o.useEffect(()=>{i?.profile&&(g({name:i.profile.name||"",email:i.profile.email||"",phone:i.profile.phone||""}),c({}))},[i]);const x=a=>{const{name:n,value:F}=a.target;g({...r,[n]:F}),s[n]&&c({...s,[n]:""})},E=()=>{const a={};return r.name.trim()?r.name.trim().length<2&&(a.name="Name must be at least 2 characters"):a.name="Name is required",r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(a.email="Please enter a valid email address"):a.email="Email is required",r.phone.trim()?/^[\d\s\-\+\(\)]+$/.test(r.phone)||(a.phone="Please enter a valid phone number"):a.phone="Phone number is required",c(a),Object.keys(a).length===0},k=async a=>{if(a.preventDefault(),!!E())try{await P(r).unwrap(),N.success("Profile updated successfully!"),l(!1),p()}catch(n){N.error(n?.data?.message||"Update failed. Please try again.")}};if(v)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(u,{className:"w-8 h-8 animate-spin text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading profile..."})]})});if(w)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(d,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load profile"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"We couldn't retrieve your profile information. Please try again later."}),e.jsx("button",{onClick:()=>p(),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors font-medium",children:"Retry"})]})});const t=i?.profile;return e.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account information and preferences"})]}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 px-8 py-12 sm:py-16",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-full bg-white p-1 shadow-lg",children:e.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",alt:t?.name||"Profile",className:"w-full h-full rounded-full object-cover"})}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 w-6 h-6 rounded-full border-4 border-white"})]}),e.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white capitalize",children:t?.name||"User Name"}),e.jsx("p",{className:"text-gray-300 mt-1 text-lg",children:t?.email}),e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full border border-white/20",children:[e.jsx(f,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-white font-medium text-sm",children:"Super Administrator"})]})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-6 py-3 bg-white text-gray-900 rounded-lg hover:bg-gray-100 transition-colors font-semibold shadow-lg","aria-label":"Edit profile",children:[e.jsx(U,{className:"w-4 h-4"}),"Edit Profile"]})]})}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Profile Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your account details and contact information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[e.jsx(b,{className:"w-4 h-4"}),"Full Name"]}),e.jsx("div",{className:"text-base text-gray-900 font-medium",children:t?.name||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[e.jsx(y,{className:"w-4 h-4"}),"Email Address"]}),e.jsx("div",{className:"text-base text-gray-900 font-medium",children:t?.email||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[e.jsx(j,{className:"w-4 h-4"}),"Phone Number"]}),e.jsx("div",{className:"text-base text-gray-900 font-medium",children:t?.phone||"Not provided"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-500",children:[e.jsx(f,{className:"w-4 h-4"}),"Account Role"]}),e.jsx("div",{className:"text-base text-gray-900 font-medium capitalize",children:t?.role||"Not provided"})]})]})]})]})]}),e.jsx(L,{children:C&&e.jsxs(e.Fragment,{children:[e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:e.jsxs(h.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{duration:.2},className:"bg-white rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto pointer-events-auto",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Edit Profile"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Update your account information"})]}),e.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:e.jsx($,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(b,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"name",name:"name",type:"text",value:r.name,onChange:x,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-colors ${s.name?"border-red-300 bg-red-50":"border-gray-300 bg-white hover:border-gray-400"}`,placeholder:"Enter your full name","aria-invalid":!!s.name,"aria-describedby":s.name?"name-error":void 0})]}),s.name&&e.jsxs("p",{id:"name-error",className:"mt-2 text-sm text-red-600 flex items-center gap-1",role:"alert",children:[e.jsx(d,{className:"w-4 h-4"}),s.name]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(y,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",value:r.email,onChange:x,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-colors ${s.email?"border-red-300 bg-red-50":"border-gray-300 bg-white hover:border-gray-400"}`,placeholder:"Enter your email address","aria-invalid":!!s.email,"aria-describedby":s.email?"email-error":void 0})]}),s.email&&e.jsxs("p",{id:"email-error",className:"mt-2 text-sm text-red-600 flex items-center gap-1",role:"alert",children:[e.jsx(d,{className:"w-4 h-4"}),s.email]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"phone",name:"phone",type:"tel",value:r.phone,onChange:x,className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-gray-900 focus:border-transparent outline-none transition-colors ${s.phone?"border-red-300 bg-red-50":"border-gray-300 bg-white hover:border-gray-400"}`,placeholder:"Enter your phone number","aria-invalid":!!s.phone,"aria-describedby":s.phone?"phone-error":void 0})]}),s.phone&&e.jsxs("p",{id:"phone-error",className:"mt-2 text-sm text-red-600 flex items-center gap-1",role:"alert",children:[e.jsx(d,{className:"w-4 h-4"}),s.phone]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-5 py-2.5 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 font-medium transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-5 py-2.5 bg-gray-900 text-white rounded-lg hover:bg-gray-800 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-4 h-4"}),"Save Changes"]})})]})]})]})})]})})]})};export{M as default};

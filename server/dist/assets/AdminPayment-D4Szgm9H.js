import{au as w,av as z,D as o,j as e,y as h}from"./index-D6ItWktg.js";function S(){const{data:i,isLoading:y,isError:x}=w(),[b,{isLoading:c}]=z(),[d,p]=o.useState(""),[m,g]=o.useState(null),[s,u]=o.useState({businessName:"",paymentNote:"",upiId:"",upiName:"",showUpi:!0,showQr:!0,razorpayEnabled:!1,razorpayKeyId:"",razorpayKeySecret:"",isActive:!0});o.useEffect(()=>{if(i?.payment){const a=i.payment;u({businessName:a.businessName||"",paymentNote:a.paymentNote||"",upiId:a.upiId||"",upiName:a.upiName||"",showUpi:a.showUpi??!0,showQr:a.showQr??!0,razorpayEnabled:a.razorpayEnabled??!1,razorpayKeyId:a.razorpayKeyId||"",razorpayKeySecret:"",isActive:a.isActive??!0}),a.qrImage?.url&&p(a.qrImage.url)}},[i]);const n=a=>{const{name:r,value:t,type:l,checked:j}=a.target;u(v=>({...v,[r]:l==="checkbox"?j:t}))},N=a=>{const r=a.target.files[0];r&&(g(r),p(URL.createObjectURL(r)))},f=async a=>{a.preventDefault();const r=new FormData;Object.entries(s).forEach(([t,l])=>r.append(t,l)),m&&r.append("qrImage",m);try{await b(r).unwrap(),h.success("‚úÖ Payment settings saved")}catch(t){console.error(t),h.error(t?.data?.message||"‚ùå Save failed")}};return y?e.jsx("div",{className:"p-6",children:"Loading payment settings..."}):x?e.jsx("div",{className:"p-6 text-red-600",children:"Failed to load payment settings"}):e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"üí≥ Payment Settings"}),e.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-white p-6 rounded-xl shadow",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{name:"businessName",value:s.businessName,onChange:n,placeholder:"Business Name",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"upiId",value:s.upiId,onChange:n,placeholder:"UPI ID",className:"w-full border p-2 rounded"}),e.jsx("input",{name:"upiName",value:s.upiName,onChange:n,placeholder:"UPI Name",className:"w-full border p-2 rounded"}),e.jsx("textarea",{name:"paymentNote",value:s.paymentNote,onChange:n,placeholder:"Payment note",className:"w-full border p-2 rounded"}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"showUpi",checked:s.showUpi,onChange:n}),"Show UPI"]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"showQr",checked:s.showQr,onChange:n}),"Show QR Code"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium",children:"QR Code"}),d&&e.jsx("img",{src:d,alt:"QR Preview",className:"w-36 h-36 object-contain border rounded mb-2"}),e.jsx("input",{type:"file",accept:"image/*",onChange:N})]}),e.jsx("hr",{}),e.jsxs("label",{className:"flex items-center gap-2 font-medium",children:[e.jsx("input",{type:"checkbox",name:"razorpayEnabled",checked:s.razorpayEnabled,onChange:n}),"Enable Razorpay"]}),s.razorpayEnabled&&e.jsxs(e.Fragment,{children:[e.jsx("input",{name:"razorpayKeyId",value:s.razorpayKeyId,onChange:n,placeholder:"Razorpay Key ID",className:"w-full border p-2 rounded"}),e.jsx("input",{type:"password",name:"razorpayKeySecret",value:s.razorpayKeySecret,onChange:n,placeholder:"Razorpay Key Secret",className:"w-full border p-2 rounded"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:"isActive",checked:s.isActive,onChange:n}),"Payment Active"]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("button",{disabled:c,className:"w-full bg-black text-white py-2 rounded disabled:opacity-50",children:c?"Saving...":"Save Payment Settings"})})]})]})}export{S as default};

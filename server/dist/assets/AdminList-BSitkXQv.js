import{aF as V,aK as X,aL as G,aM as I,D as r,j as e,aN as w,aO as p,aP as j,aQ as q,aR as K,aS as A,aT as k,aU as D,aV as C,aW as M,aX as P,aY as O,aZ as Y,a_ as Z,a$ as H,b0 as J,y as d}from"./index-D6ItWktg.js";function se(){const{data:f,isLoading:U}=V(),[T]=X(),[$]=G(),[B]=I(),[x,h]=r.useState([]),[a,g]=r.useState(null),[W,o]=r.useState(!1),[n,F]=r.useState(""),[c,S]=r.useState("all"),[E,m]=r.useState(null),[_,L]=r.useState(!1),[l,u]=r.useState({name:"",email:"",phone:""});r.useEffect(()=>{f?.admins&&h(f.admins)},[f]);const b=r.useMemo(()=>x.filter(s=>{const t=s.name?.toLowerCase().includes(n.toLowerCase())||s.email?.toLowerCase().includes(n.toLowerCase())||s.phone?.toLowerCase().includes(n.toLowerCase())||s.websiteSlug?.toLowerCase().includes(n.toLowerCase()),i=c==="all"||c==="active"&&s.isActive||c==="blocked"&&!s.isActive;return t&&i}),[x,n,c]),y=r.useMemo(()=>{const s=x.length,t=x.filter(R=>R.isActive).length,i=s-t;return{total:s,active:t,blocked:i}},[x]),N=async s=>{try{await T(s).unwrap(),h(t=>t.map(i=>i._id===s?{...i,isActive:!i.isActive}:i)),d.success("Status updated successfully")}catch{d.error("Failed to update status")}},Q=async s=>{try{await $(s).unwrap(),h(t=>t.filter(i=>i._id!==s)),m(null),a?._id===s&&g(null),d.success("Admin deleted successfully")}catch{d.error("Failed to delete admin")}},v=s=>{g(s),u({name:s.name||"",email:s.email||"",phone:s.phone||""}),o(!1)},z=async()=>{if(!l.name.trim()||!l.email.trim()){d.error("Name and email are required");return}L(!0);try{await B({id:a._id,data:l}).unwrap(),h(s=>s.map(t=>t._id===a._id?{...t,...l}:t)),g({...a,...l}),o(!1),d.success("Admin updated successfully")}catch{d.error("Failed to update admin")}finally{L(!1)}};return U?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-300 border-t-blue-600 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading admins..."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Admin Management"}),e.jsx("p",{className:"text-gray-600 mt-1.5",children:"Manage and monitor all admin accounts"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Admins"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:y.total})]}),e.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(w,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:y.active})]}),e.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(p,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Blocked"}),e.jsx("p",{className:"text-3xl font-bold text-red-600 mt-1",children:y.blocked})]}),e.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(j,{className:"h-6 w-6 text-red-600"})})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, phone, or website slug...",value:n,onChange:s=>F(s.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-sm"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5 pointer-events-none"}),e.jsxs("select",{value:c,onChange:s=>S(s.target.value),className:"pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-sm bg-white appearance-none cursor-pointer min-w-[140px]",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"blocked",children:"Blocked"})]})]}),(n||c!=="all")&&e.jsxs("button",{onClick:()=>{F(""),S("all")},className:"px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Clear"]})]})})]}),e.jsx("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Admin"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Website"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(w,{className:"h-12 w-12 text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No admins found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:n||c!=="all"?"Try adjusting your search or filters":"No admins have been created yet"})]})})}):b.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>v(s),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:s.name?.charAt(0)?.toUpperCase()||"A"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:s.name||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.phone||"—"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(k,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-blue-600 font-medium",children:["/site/",s.websiteSlug]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-3 w-3 mr-1.5"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-3 w-3 mr-1.5"}),"Blocked"]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),v(s)},className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:e.jsx(D,{className:"h-5 w-5"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),N(s._id)},className:`p-2 rounded-lg transition-colors ${s.isActive?"text-orange-600 hover:text-orange-700 hover:bg-orange-50":"text-green-600 hover:text-green-700 hover:bg-green-50"}`,title:s.isActive?"Deactivate":"Activate",children:e.jsx(C,{className:"h-5 w-5"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),m(s._id)},className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(M,{className:"h-5 w-5"})})]})})]},s._id))})]})})}),e.jsx("div",{className:"lg:hidden space-y-4",children:b.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(w,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No admins found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:n||c!=="all"?"Try adjusting your search or filters":"No admins have been created yet"})]}):b.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-semibold text-lg flex-shrink-0",children:s.name?.charAt(0)?.toUpperCase()||"A"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.name||"N/A"}),e.jsx("p",{className:"text-sm text-gray-500",children:s.email})]})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold ${s.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),"Blocked"]})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(P,{className:"h-4 w-4 mr-2 text-gray-400"}),s.phone||"—"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(k,{className:"h-4 w-4 mr-2 text-gray-400"}),e.jsxs("span",{className:"text-blue-600",children:["/site/",s.websiteSlug]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>v(s),className:"flex-1 px-4 py-2.5 bg-gray-900 text-white rounded-lg font-medium text-sm hover:bg-gray-800 transition-colors flex items-center justify-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"View"]}),e.jsxs("button",{onClick:()=>N(s._id),className:`flex-1 px-4 py-2.5 rounded-lg font-medium text-sm text-white transition-colors flex items-center justify-center gap-2 ${s.isActive?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"}`,children:[e.jsx(C,{className:"h-4 w-4"}),s.isActive?"Deactivate":"Activate"]}),e.jsx("button",{onClick:()=>m(s._id),className:"px-4 py-2.5 bg-red-600 text-white rounded-lg font-medium text-sm hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:e.jsx(M,{className:"h-4 w-4"})})]})]},s._id))}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Confirm Deletion"}),e.jsx("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(A,{className:"h-6 w-6"})})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this admin? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>m(null),className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>Q(E),className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex justify-end",children:e.jsxs("div",{className:"w-full max-w-md bg-white h-full shadow-2xl overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Admin Details"}),e.jsx("button",{onClick:()=>{g(null),o(!1)},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(A,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"p-6",children:W?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>o(!1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[e.jsx(Z,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Back to details"})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-6",children:"Edit Admin"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.name,onChange:s=>u({...l,name:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:l.email,onChange:s=>u({...l,email:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Enter email address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",value:l.phone,onChange:s=>u({...l,phone:s.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Website Slug"}),e.jsx("input",{type:"text",disabled:!0,value:a.websiteSlug,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Website slug cannot be changed"})]})]}),e.jsxs("div",{className:"mt-8 space-y-3",children:[e.jsx("button",{onClick:z,disabled:_,className:"w-full px-4 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:_?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-5 w-5 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-5 w-5"}),"Save Changes"]})}),e.jsx("button",{onClick:()=>o(!1),className:"w-full px-4 py-3 border border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold text-2xl",children:a.name?.charAt(0)?.toUpperCase()||"A"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:a.name||"N/A"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold mt-1 ${a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.isActive?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),"Blocked"]})})]})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(O,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:a.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-green-100 flex items-center justify-center flex-shrink-0",children:e.jsx(P,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Phone"}),e.jsx("p",{className:"text-gray-900",children:a.phone||"—"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-purple-100 flex items-center justify-center flex-shrink-0",children:e.jsx(k,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Website Slug"}),e.jsxs("p",{className:"text-blue-600 font-medium",children:["/site/",a.websiteSlug]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>o(!0),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5"}),"Edit Admin"]}),e.jsxs("button",{onClick:()=>N(a._id),className:`w-full px-4 py-3 rounded-lg font-semibold text-white transition-colors flex items-center justify-center gap-2 ${a.isActive?"bg-orange-600 hover:bg-orange-700":"bg-green-600 hover:bg-green-700"}`,children:[e.jsx(C,{className:"h-5 w-5"}),a.isActive?"Deactivate Admin":"Activate Admin"]})]})]})})]})})]})})}export{se as default};

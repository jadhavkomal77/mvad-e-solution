import{as as w,at as N,D as T,g as F,d as h,e as g,j as e,L as A,y as k}from"./index-D6ItWktg.js";const B={label:"",url:"",type:"quick",isActive:!0,order:1};function S(){const{data:c,isLoading:r}=w(),[m,{isLoading:d}]=N(),i=c?.data,y=T.useMemo(()=>({brandText:i?.brandText||"",copyrightText:i?.copyrightText||"",developedByText:i?.developedByText||"",showDevelopedBy:i?.showDevelopedBy??!0,contact:{phone:i?.contact?.phone||"",email:i?.contact?.email||"",address:i?.contact?.address||""},socialLinks:{facebook:i?.socialLinks?.facebook||"",instagram:i?.socialLinks?.instagram||"",twitter:i?.socialLinks?.twitter||"",linkedin:i?.socialLinks?.linkedin||""},links:Array.isArray(i?.links)?[...i.links].sort((t,a)=>t.order-a.order):[]}),[i]),s=F({enableReinitialize:!0,initialValues:y,validationSchema:h({brandText:g().required("Brand name is required"),contact:h({email:g().email("Invalid email")})}),onSubmit:async t=>{try{const a=t.links.filter(n=>n.label.trim()&&n.url.trim()).map((n,l)=>({...n,order:l+1}));await m({...t,brandText:t.brandText.trim(),copyrightText:t.copyrightText.trim(),developedByText:t.developedByText.trim(),links:a}).unwrap(),k.success("Footer updated successfully ðŸŽ¯")}catch{k.error("Footer update failed âŒ")}}}),j=()=>s.setFieldValue("links",[...s.values.links,{...B,order:s.values.links.length+1}]),p=(t,a,n)=>s.setFieldValue("links",s.values.links.map((l,u)=>u===t?{...l,[a]:n}:l)),v=t=>s.setFieldValue("links",s.values.links.filter((a,n)=>n!==t).map((a,n)=>({...a,order:n+1}))),f=t=>p(t,"isActive",!s.values.links[t].isActive),b=(t,a)=>{const n=[...s.values.links],l=t+a;l<0||l>=n.length||([n[t],n[l]]=[n[l],n[t]],s.setFieldValue("links",n.map((u,L)=>({...u,order:L+1}))))};return r?e.jsx("p",{className:"text-center py-20 text-gray-500",children:"Loading footer settings..."}):e.jsxs("div",{className:"max-w-6xl mx-auto bg-white shadow-xl rounded-2xl p-8",children:[e.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Footer Settings"}),e.jsxs("form",{onSubmit:s.handleSubmit,className:"space-y-12",children:[e.jsxs(x,{title:"Basic Details",children:[e.jsx(o,{label:"Brand Text",name:"brandText",formik:s}),e.jsx(o,{label:"Copyright Text",name:"copyrightText",formik:s}),e.jsx(o,{label:"Developed By Text",name:"developedByText",formik:s}),e.jsxs("label",{className:"flex items-center gap-3 text-sm font-medium",children:[e.jsx("input",{type:"checkbox",...s.getFieldProps("showDevelopedBy"),className:"accent-indigo-600"}),"Show â€œDeveloped Byâ€ text"]})]}),e.jsxs(x,{title:"Contact Information",children:[e.jsx(o,{label:"Phone",name:"contact.phone",formik:s}),e.jsx(o,{label:"Email",name:"contact.email",type:"email",formik:s}),e.jsx(o,{label:"Address",name:"contact.address",formik:s})]}),e.jsx(x,{title:"Social Accounts",children:["facebook","instagram","twitter","linkedin"].map(t=>e.jsx(o,{label:`${t} URL`,name:`socialLinks.${t}`,formik:s},t))}),e.jsxs(x,{title:"Footer Links",children:[e.jsx("button",{type:"button",onClick:j,className:"bg-green-600 text-white px-4 py-2 rounded-lg",children:"+ Add Link"}),s.values.links.map((t,a)=>e.jsxs("div",{className:"border rounded-xl p-4 bg-gray-50 space-y-4",children:[e.jsx(o,{label:"Label",name:`links.${a}.label`,formik:s}),e.jsx(o,{label:"URL",name:`links.${a}.url`,formik:s}),e.jsxs("select",{value:t.type,onChange:n=>p(a,"type",n.target.value),className:"w-full p-3 border rounded-lg",children:[e.jsx("option",{value:"quick",children:"Quick Link"}),e.jsx("option",{value:"important",children:"Important Link"})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx("button",{type:"button",onClick:()=>f(a),className:`px-4 py-1 rounded ${t.isActive?"bg-green-600 text-white":"bg-gray-300"}`,children:t.isActive?"Active":"Inactive"}),e.jsx("button",{type:"button",onClick:()=>b(a,-1),children:"â¬†"}),e.jsx("button",{type:"button",onClick:()=>b(a,1),children:"â¬‡"}),e.jsx("button",{type:"button",onClick:()=>v(a),className:"bg-red-500 text-white px-4 py-1 rounded",children:"Delete"})]})]},a))]}),e.jsx("button",{type:"submit",disabled:d,className:"bg-indigo-600 text-white font-bold py-3 rounded-xl w-full",children:d?e.jsx(A,{className:"animate-spin mx-auto"}):"Save Footer"})]})]})}function o({label:c,name:r,type:m="text",formik:d}){const i=d.touched[r]&&d.errors[r];return e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:c}),e.jsx("input",{type:m,...d.getFieldProps(r),className:`w-full p-3 border rounded-lg mt-1 ${i?"border-red-500":"border-gray-300"}`}),i&&e.jsx("p",{className:"text-xs text-red-500",children:i})]})}function x({title:c,children:r}){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:c}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r}),e.jsx("hr",{})]})}export{S as default};

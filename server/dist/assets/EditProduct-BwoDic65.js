import{b as N,r as v,ab as w,ac as P,D as c,j as a,y as l}from"./index-D6ItWktg.js";function D(){const{id:i}=N(),m=v(),{data:g,isLoading:f,isError:x}=w(i),[h,{isLoading:d}]=P(),r=g?.product,[e,o]=c.useState({name:"",description:"",price:"",category:"",features:"",image:null}),[u,p]=c.useState("");if(c.useEffect(()=>{r&&(o({name:r.name||"",description:r.description||"",price:r.price||"",category:r.category||"",features:r.features?.join(",")||"",image:null}),p(r.image))},[r]),f)return a.jsx("p",{className:"text-center mt-20",children:"Loading product..."});if(x||!r)return a.jsx("p",{className:"text-center text-red-600",children:"Product not found"});const s=n=>{o({...e,[n.target.name]:n.target.value})},b=n=>{const t=n.target.files[0];t&&(o({...e,image:t}),p(URL.createObjectURL(t)))},j=async n=>{n.preventDefault();const t=new FormData;t.append("name",e.name),t.append("description",e.description),t.append("price",e.price),t.append("category",e.category),t.append("features",e.features),e.image&&t.append("image",e.image);try{await h({id:i,formData:t}).unwrap(),l.success("✅ Product updated successfully"),m("/adminDash/adminproducts")}catch(y){console.error(y),l.error("❌ Update failed")}};return a.jsxs("div",{className:"p-6 max-w-3xl mx-auto",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Product"}),a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsx("input",{name:"name",value:e.name,onChange:s,className:"w-full border p-2 rounded"}),a.jsx("textarea",{name:"description",value:e.description,onChange:s,className:"w-full border p-2 rounded h-24"}),a.jsx("input",{type:"number",name:"price",value:e.price,onChange:s,className:"w-full border p-2 rounded"}),a.jsx("input",{name:"category",value:e.category,onChange:s,className:"w-full border p-2 rounded"}),a.jsx("input",{name:"features",value:e.features,onChange:s,className:"w-full border p-2 rounded"}),a.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:b}),u&&a.jsx("img",{src:u,className:"h-40 object-contain border rounded"}),a.jsx("button",{disabled:d,className:"bg-blue-600 text-white px-6 py-2 rounded",children:d?"Updating...":"Update Product"})]})]})}export{D as default};
